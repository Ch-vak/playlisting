(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],{178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var n,s=a(0),i=a.n(s),r=a(83),c=a.n(r),l=a(8),o=a(9),u=a(11),h=a(10),p=a(6),m=a(12),d=(a(178),function(){return i.a.createElement("svg",{style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto"},width:"324px",height:"324px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},i.a.createElement("circle",{cx:50,cy:50,r:"17.7415",fill:"none",stroke:"#18161b",strokeWidth:12},i.a.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"2.9411764705882355s",values:"0;26",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"-1.4705882352941178s"}),i.a.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"2.9411764705882355s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"-1.4705882352941178s"})),i.a.createElement("circle",{cx:50,cy:50,r:"2.68588",fill:"none",stroke:"#9e2721",strokeWidth:12},i.a.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"2.9411764705882355s",values:"0;26",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline"}),i.a.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"2.9411764705882355s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline"})))}),y=(a(179),function(e){return i.a.createElement("div",{className:"Spinner"},i.a.createElement(d,null))}),f=(a(180),a(181),a(182),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).addTrack=a.addTrack.bind(Object(p.a)(a)),a.removeTrack=a.removeTrack.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"addTrack",value:function(e){this.props.onAdd(this.props.track)}},{key:"removeTrack",value:function(e){this.props.onRemove(this.props.track)}},{key:"renderAction",value:function(){return this.props.isRemoval?i.a.createElement("button",{className:"Track-action",onClick:this.removeTrack},"-"):i.a.createElement("button",{className:"Track-action",onClick:this.addTrack},"+")}},{key:"render",value:function(){return i.a.createElement("div",{className:"Track"},i.a.createElement("div",{className:"Track-information"},i.a.createElement("h3",null,this.props.track.name),i.a.createElement("p",null,this.props.track.artist," | ",this.props.track.album),i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.props.track.preview},"Preview On Spotify")),this.renderAction())}}]),t}(i.a.Component)),k=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"TrackList"},this.props.tracks.map((function(t){return i.a.createElement(f,{track:t,key:t.id,onAdd:e.props.onAdd,isRemoval:e.props.isRemoval,onRemove:e.props.onRemove})})))}}]),t}(i.a.Component),v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleNameChange=a.handleNameChange.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleNameChange",value:function(e){this.props.onNameChange(e.target.value)}},{key:"render",value:function(){return i.a.createElement("div",{className:"Playlist"},i.a.createElement("input",{onChange:this.handleNameChange,defaultValue:"New Playlist"}),i.a.createElement(k,{tracks:this.props.playlistTracks,isRemoval:!0,onRemove:this.props.onRemove}),i.a.createElement("button",{className:"Playlist-save",onClick:this.props.onSave},"SAVE TO SPOTIFY"))}}]),t}(i.a.Component),b=(a(183),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={term:""},a.handleTermChange=a.handleTermChange.bind(Object(p.a)(a)),a.search=a.search.bind(Object(p.a)(a)),a.searchEnter=a.searchEnter.bind(Object(p.a)(a)),a.reset=a.reset.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"search",value:function(){this.props.onSearch(this.state.term)}},{key:"searchEnter",value:function(e){13===e.keyCode&&this.props.onSearch(this.state.term)}},{key:"reset",value:function(){this.props.onReset()}},{key:"render",value:function(){return i.a.createElement("div",{className:"SearchBar"},i.a.createElement("input",{placeholder:"Enter A Song Title",onChange:this.handleTermChange,onKeyDown:this.searchEnter}),i.a.createElement("button",{className:"SearchButton",onClick:this.search},"SEARCH"),i.a.createElement("button",{className:"SearchButton",onClick:this.reset},"RESET"))}}]),t}(i.a.Component)),g=(a(184),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"SearchResults"},i.a.createElement("h2",null,"Results"),i.a.createElement(k,{tracks:this.props.searchResults,onAdd:this.props.onAdd}))}}]),t}(i.a.Component)),S="9c619bb75d834ca3b4a2658a9b582ca1",O="http://ChrysostomosVakasiras.github.io/playlisting",T={getAccessToken:function(){if(n)return n;var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);if(e&&t){n=e[1];var a=Number(t[1]);return window.setTimeout((function(){return n=""}),1e4*a),console.log("1"),window.history.pushState("Access Token",null,"/"),n}var s="https://accounts.spotify.com/authorize?client_id=".concat(S,"&response_type=token&scope=playlist-modify-public&redirect_uri=").concat(O);window.location=s},search:function(e){return T.getAccessToken(),localStorage.setItem("term",JSON.stringify(e)),n=T.getAccessToken(),fetch("https://api.spotify.com/v1/search?type=track&q=".concat(e),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri,preview:e.album.artists[0].external_urls.spotify,img:e.preview_url}})):(console.log("did i went here?"),[])}))},savePlaylist:function(e,t){if(e&&t.length){var a,n=T.getAccessToken(),s={Authorization:"Bearer ".concat(n)};return fetch("https://api.spotify.com/v1/me",{headers:s}).then((function(e){return e.json()})).then((function(n){return a=n.id,fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists"),{headers:s,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){var n=e.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists/").concat(n,"/tracks"),{headers:s,method:"POST",body:JSON.stringify({uris:t})})}))}))}},getRedirect:function(){var e="https://accounts.spotify.com/authorize?client_id=".concat(S,"&response_type=token&scope=playlist-modify-public&redirect_uri=").concat(O);window.location=e}},N=T,E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={searchResults:[],playlistName:localStorage.getItem("playlistName")?JSON.parse(localStorage.getItem("playlistName")):"New Playlist",visible:!1,playlistTracks:localStorage.getItem("playlist")?JSON.parse(localStorage.getItem("playlist")):[]},a.search=a.search.bind(Object(p.a)(a)),a.addTrack=a.addTrack.bind(Object(p.a)(a)),a.removeTrack=a.removeTrack.bind(Object(p.a)(a)),a.updatePlaylistName=a.updatePlaylistName.bind(Object(p.a)(a)),a.savePlaylist=a.savePlaylist.bind(Object(p.a)(a)),a.updateSearchResults=a.updateSearchResults.bind(Object(p.a)(a)),a.reset=a.reset.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"showSpinner",value:function(){this.setState({visible:!0})}},{key:"hideSpinner",value:function(){this.setState({visible:!1})}},{key:"search",value:function(e){var t=this;this.showSpinner(),N.search(e).then((function(t){return t||N.search(e)})).then((function(e){t.setState({searchResults:e})})),setTimeout((function(){return t.hideSpinner()}),1e3)}},{key:"addTrack",value:function(e){var t=this.state.playlistTracks;t.find((function(t){return t.id===e.id}))||(t.push(e),this.setState({playlistTracks:t}),this.updateSearchResults(),localStorage.setItem("playlist",JSON.stringify(this.state.playlistTracks)),localStorage.setItem("playlistName",JSON.stringify(this.state.playlistName)))}},{key:"removeTrack",value:function(e){var t=this.state.playlistTracks;t=t.filter((function(t){return t.id!==e.id})),this.setState({playlistTracks:t}),localStorage.setItem("playlist",JSON.stringify(this.state.playlistTracks)),localStorage.setItem("playlistName",JSON.stringify(this.state.playlistName))}},{key:"updatePlaylistName",value:function(e){this.setState({playlistName:e})}},{key:"updateSearchResults",value:function(){var e=this,t=this.state.searchResults,a=this.state.playlistTracks;t.map((function(n){return a.map((function(a){return n.id===a.id&&(t.splice(n,1),e.setState((function(){return{searchResults:t}}))),null}))}))}},{key:"savePlaylist",value:function(){var e=this;if(this.showSpinner(),N.getRedirect(),this.state.playlistTracks!==[]){var t=this.state.playlistTracks.map((function(e){return e.uri}));N.savePlaylist(this.state.playlistName,t).then((function(){e.setState({playlistName:"Create New playlist?",playlistTracks:[]})}))}setTimeout((function(){return e.hideSpinner()}),1e3)}},{key:"reset",value:function(){this.setState((function(){return{playlistTracks:[]}})),localStorage.setItem("playlist",[]),localStorage.setItem("playlistName","Create New Playlist?")}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Play",i.a.createElement("span",{className:"highlight"},"list"),"ing"),i.a.createElement("div",{className:"App"},i.a.createElement(b,{onSearch:this.search,onReset:this.reset}),i.a.createElement("div",{className:"App-playlist"},i.a.createElement(g,{searchResults:this.state.searchResults,onAdd:this.addTrack}),this.state.visible?i.a.createElement(y,null):null,i.a.createElement(v,{playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks,onNameChange:this.updatePlaylistName,onRemove:this.removeTrack,onSave:this.savePlaylist}))))}}]),t}(i.a.Component);a(185);c.a.render(i.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat("/playlisting","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))},84:function(e,t,a){e.exports=a(186)}},[[84,1,2]]]);
//# sourceMappingURL=main.d8d6b431.chunk.js.map